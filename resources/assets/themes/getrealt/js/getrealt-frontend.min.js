!function(){"use strict";var e=function(e,t){var n=this;n.getOverride=function(e,t){return void 0===t?e:t},n.applyOptions=function(e){var t={maxRetries:3,enableCache:!0,method:"GET",responseType:"json"};return e&&(t.maxRetries=n.getOverride(t.maxRetries,e.maxRetries),t.enableCache=n.getOverride(t.enableCache,e.enableCache),t.method=n.getOverride(t.method,e.method),t.responseType=n.getOverride(t.responseType,e.responseType),t.headers=n.getOverride(t.headers,e.headers),t.transformRequest=n.getOverride(t.transformRequest,e.transformRequest)),"GET"===t.method?t.params=e.params:t.data=e.params,t.url=e.url,t},n.allowCaching=function(e){var t=e.enableCache;return t&&(t=!1),t},n.cacheResults=function(t,i){var s=e.defer();return n.allowCaching(t)||s.resolve(null),s.promise},n.fetchFromCache=function(t){var i=e.defer();return n.allowCaching(t)||i.resolve(null),i.promise},n.process=function(i){var s=e.defer();return n.fetchFromCache(i).then(function(e){if(e)s.resolve(e);else{var r={url:i.url,method:i.method,responseType:i.responseType,data:i.data,params:i.params};i.headers&&(r.headers=i.headers),i.transformRequest&&(r.transformRequest=i.transformRequest),t(r).then(function(e){e&&i.enableCache&&n.cacheResults(i,e.data),s.resolve(e.data)},function(e,t,n,i){s.reject({data:e,status:t,headers:n,config:i})})}}),s.promise},n.go=function(t){var i=e.defer(),s=n.applyOptions(t);return polly().retry(n.maxRetries).executeForPromise(function(){return n.process(s)}).then(function(e){i.resolve(e)},function(e){if(i.reject(e.data),e.data&&401===e.data.status){!0===confirm("You are not authorized to perform this action.  It's possible your session has timed out.  Would you like to try logging back in?")&&window.location.reload(!0)}else alert("There was an error!")}),i.promise}};angular.module("getrealt.rest",[]).service("restService",["$q","$http",e])}(),function(){var e=function(e,t,n){this.index=function(t,i,s,r,a,o,l,c,d){var u=e.defer(),m={keywords:i};return t&&(t&&(m.advancedSearch=t),s&&(m.minPrice=s),r&&(m.maxPrice=r),l&&(m.includeResidential=l),c&&(m.includeLand=c),d&&(m.includeCommercial=d),a&&(m.beds=a),o&&(m.baths=o)),n.go({url:"/getrealt/listings",method:"POST",params:m}).then(function(e){u.resolve(e.data)},function(e){throw u.reject(e.data),e}),u.promise},this.show=function(t){var i=e.defer();return n.go({url:"/getrealt/listings"+t}).then(function(e){i.resolve(e.data)},function(e){throw i.reject(e.data),e}),i.promise},this.sendLead=function(t){var i=e.defer();return n.go({url:"/getrealt/listings/sendLead",method:"POST",params:t}).then(function(e){i.resolve(e.data)},function(e){throw i.reject(e.data),e}),i.promise}},t=function(e,t,n){e.advancedSearch=!1,e.keywords=null,e.minPrice=null,e.maxPrice=null,e.beds=null,e.baths=null,e.includeResidential=!0,e.includeLand=!0,e.includeCommercial=!0,e.listings=null,e.search=function(){(e.advancedSearch||e.keywords)&&(t.searchingListings(!0),n.index(e.advancedSearch,e.keywords,e.minPrice,e.maxPrice,e.beds,e.baths,e.includeResidential,e.includeLand,e.includeCommercial).then(function(n){e.listings=n,t.searchingListings(!1),t.refreshListings(e.listings)}))}},n=function(e,t){e.listings=null,t.onSearchingListings(e,function(t){e.searching=t}),t.onRefreshListings(e,function(t){e.listings=t})},i=function(e){var t=function(t){e.$broadcast("refreshListings",t)},n=function(e,t){e.$on("refreshListings",function(e,n){t(n)})};return{refreshListings:t,onRefreshListings:n,searchingListings:function(t){e.$broadcast("searchingListings",t)},onSearchingListings:function(e,t){e.$on("searchingListings",function(e,n){t(n)})}}},s=function(e,t,n){e.listingSource=null,e.listingType=null,e.listingID=null,e.address=null,e.initMap=function(){var t=new google.maps.Geocoder;t&&t.geocode({address:e.address},function(t,n){if(n===google.maps.GeocoderStatus.OK&&n!==google.maps.GeocoderStatus.ZERO_RESULTS){var i=t[0].geometry.location,s=document.getElementById("map");s.style.display="block";var r={center:i,zoom:16,panControl:!1,scrollwheel:!1,mapTypeId:google.maps.MapTypeId.ROADMAP},a=new google.maps.Map(s,r),o=new google.maps.Marker({position:i,map:a,icon:"/assets/themes/getrealt/images/marker.png"}),l="http://www.google.com/maps/dir/current+position/"+encodeURI(e.address),c="http://maps.google.com/maps?q=&layer=c&cbll="+t[0].geometry.location.lat()+","+t[0].geometry.location.lng(),d='<div class="info-window"><h5><i class="fa fa-map-marker"></i> '+t[0].formatted_address+'</h5><div class="info-content"><p><i class="fa fa-car"></i>: <a href="'+l+'" target="_blank">Get Directions</a><br /><i class="fa fa-street-view"></i>: <a href="'+c+'" target="_blank">Street View</a><br /></p></div></div>',u=new google.maps.InfoWindow({content:d,maxWidth:400});o.addListener("click",function(){u.open(a,o)});var m=[{featureType:"administrative",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"simplified"}]},{featureType:"water",stylers:[{visibility:"simplified"}]},{featureType:"transit",stylers:[{visibility:"simplified"}]},{featureType:"landscape",stylers:[{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{visibility:"off"}]},{featureType:"road.local",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{visibility:"on"}]},{featureType:"water",stylers:[{color:"#84afa3"},{lightness:52}]},{stylers:[{saturation:-17},{gamma:.36}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#3f518c"}]}];a.set("styles",m)}})},e.initSliders=function(){$("#carousel").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:210,itemMargin:5,smoothHeight:!0,asNavFor:"#slider"}),$("#slider").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,smoothHeight:!0,sync:"#carousel"})},e.contactAgent=function(){t.open({templateUrl:"contactAgent.html",controller:"contactAgentModal",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",size:"lg",resolve:{parentController:function(){return e}}}).result.then(function(i){var s=i.contactInfo;s&&(s.name||s.phone||s.email||s.message)&&(s.listingSource=e.listingSource,s.listingType=e.listingType,s.listingID=e.listingID,n.sendLead(s).then(function(e){t.open({templateUrl:"messageConfirmation.html",controller:"messageConfirmationModal",ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",size:"sm",resolve:{message:function(){return e.success?"Message Sent!":"Oops! Our messaging is down right now.  Try contacting us directly please!"}}})}))},function(){})},e.start=function(t,n,i,s){e.listingSource=t,e.listingType=n,e.listingID=i,e.address=s,google.maps.event.addDomListener(window,"load",e.initMap),e.initSliders()}},r=function(e,t,n){e.name=null,e.phone=null,e.email=null,e.message=null,e.send=function(){var n={name:e.name,phone:e.phone,email:e.email,message:e.message};t.close({contactInfo:n})},e.cancel=function(){t.dismiss("cancel")}},a=function(e,t,n){e.message=n,e.cancel=function(){t.dismiss("cancel")}};angular.module("getrealt",["getrealt.rest","ui.bootstrap"]).factory("eventFactory",["$rootScope",i]).service("listingService",["$q","$http","restService",e]).controller("searchWidget",["$scope","eventFactory","listingService",t]).controller("listingsWidget",["$scope","eventFactory",n]).controller("listingDetails",["$scope","$uibModal","listingService",s]).controller("contactAgentModal",["$scope","$uibModalInstance","parentController",r]).controller("messageConfirmationModal",["$scope","$uibModalInstance","message",a]).directive("ngEnter",function(){return function(e,t,n){t.bind("keydown keypress",function(t){13===t.which&&(e.$apply(function(){e.$eval(n.ngEnter,{event:t})}),t.preventDefault())})}})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3QuanMiLCJnZXRyZWFsdC1mcm9udGVuZC5qcyJdLCJuYW1lcyI6WyJyZXN0U2VydmljZSIsIiRxIiwiJGh0dHAiLCJzZWxmIiwidGhpcyIsImdldE92ZXJyaWRlIiwiZGVmYXVsdFZhbHVlIiwib3ZlcnJpZGVWYWx1ZSIsImFwcGx5T3B0aW9ucyIsIm9wdGlvbnMiLCJwYXJhbXMiLCJtYXhSZXRyaWVzIiwiZW5hYmxlQ2FjaGUiLCJtZXRob2QiLCJyZXNwb25zZVR5cGUiLCJoZWFkZXJzIiwidHJhbnNmb3JtUmVxdWVzdCIsImRhdGEiLCJ1cmwiLCJhbGxvd0NhY2hpbmciLCJhbGxvdyIsImNhY2hlUmVzdWx0cyIsInJlc3VsdHMiLCJkZWZlcnJlZCIsImRlZmVyIiwicmVzb2x2ZSIsInByb21pc2UiLCJmZXRjaEZyb21DYWNoZSIsInByb2Nlc3MiLCJ0aGVuIiwiaHR0cE9wdGlvbnMiLCJzdGF0dXMiLCJjb25maWciLCJyZWplY3QiLCJnbyIsInBvbGx5IiwicmV0cnkiLCJleGVjdXRlRm9yUHJvbWlzZSIsImVyciIsImNvbmZpcm0iLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImFsZXJ0IiwiYW5ndWxhciIsIm1vZHVsZSIsInNlcnZpY2UiLCJsaXN0aW5nU2VydmljZSIsImluZGV4IiwiYWR2YW5jZWRTZWFyY2giLCJrZXl3b3JkcyIsIm1pblByaWNlIiwibWF4UHJpY2UiLCJiZWRzIiwiYmF0aHMiLCJpbmNsdWRlUmVzaWRlbnRpYWwiLCJpbmNsdWRlTGFuZCIsImluY2x1ZGVDb21tZXJjaWFsIiwic2hvdyIsImlkIiwic2VuZExlYWQiLCJpbmZvIiwic2VhcmNoV2lkZ2V0IiwiJHNjb3BlIiwiZXZlbnRGYWN0b3J5IiwibGlzdGluZ3MiLCJzZWFyY2giLCJzZWFyY2hpbmdMaXN0aW5ncyIsInJlZnJlc2hMaXN0aW5ncyIsImxpc3RpbmdzV2lkZ2V0Iiwib25TZWFyY2hpbmdMaXN0aW5ncyIsInNlYXJjaGluZyIsIm9uUmVmcmVzaExpc3RpbmdzIiwiJHJvb3RTY29wZSIsIiRicm9hZGNhc3QiLCJoYW5kbGVyIiwiJG9uIiwiZXZlbnQiLCJtZXNzYWdlIiwibGlzdGluZ0RldGFpbHMiLCIkdWliTW9kYWwiLCJsaXN0aW5nU291cmNlIiwibGlzdGluZ1R5cGUiLCJsaXN0aW5nSUQiLCJhZGRyZXNzIiwiaW5pdE1hcCIsImdlb2NvZGVyIiwiZ29vZ2xlIiwibWFwcyIsIkdlb2NvZGVyIiwiZ2VvY29kZSIsIkdlb2NvZGVyU3RhdHVzIiwiT0siLCJaRVJPX1JFU1VMVFMiLCJnZW9tZXRyeSIsIm1hcENhbnZhcyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzdHlsZSIsImRpc3BsYXkiLCJtYXBPcHRpb25zIiwiY2VudGVyIiwiem9vbSIsInBhbkNvbnRyb2wiLCJzY3JvbGx3aGVlbCIsIm1hcFR5cGVJZCIsIk1hcFR5cGVJZCIsIlJPQURNQVAiLCJtYXAiLCJNYXAiLCJtYXJrZXIiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImljb24iLCJkaXJlY3Rpb25zTGluayIsImVuY29kZVVSSSIsInN0cmVldFZpZXdMaW5rIiwibGF0IiwibG5nIiwiY29udGVudFN0cmluZyIsImZvcm1hdHRlZF9hZGRyZXNzIiwiaW5mb3dpbmRvdyIsIkluZm9XaW5kb3ciLCJjb250ZW50IiwibWF4V2lkdGgiLCJhZGRMaXN0ZW5lciIsIm9wZW4iLCJzdHlsZXMiLCJmZWF0dXJlVHlwZSIsInN0eWxlcnMiLCJ2aXNpYmlsaXR5IiwiZWxlbWVudFR5cGUiLCJjb2xvciIsImxpZ2h0bmVzcyIsInNhdHVyYXRpb24iLCJnYW1tYSIsInNldCIsImluaXRTbGlkZXJzIiwiJCIsImZsZXhzbGlkZXIiLCJhbmltYXRpb24iLCJjb250cm9sTmF2IiwiYW5pbWF0aW9uTG9vcCIsInNsaWRlc2hvdyIsIml0ZW1XaWR0aCIsIml0ZW1NYXJnaW4iLCJzbW9vdGhIZWlnaHQiLCJhc05hdkZvciIsInN5bmMiLCJjb250YWN0QWdlbnQiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJhcmlhTGFiZWxsZWRCeSIsImFyaWFEZXNjcmliZWRCeSIsInNpemUiLCJwYXJlbnRDb250cm9sbGVyIiwicmVzdWx0IiwiY29udGFjdEluZm8iLCJuYW1lIiwicGhvbmUiLCJlbWFpbCIsInN1Y2Nlc3MiLCJzdGFydCIsImFkZERvbUxpc3RlbmVyIiwiY29udGFjdEFnZW50TW9kYWwiLCIkdWliTW9kYWxJbnN0YW5jZSIsInNlbmQiLCJjbG9zZSIsImNhbmNlbCIsImRpc21pc3MiLCJtZXNzYWdlQ29uZmlybWF0aW9uTW9kYWwiLCJmYWN0b3J5IiwiZGlyZWN0aXZlIiwic2NvcGUiLCJlbGVtZW50IiwiYXR0cnMiLCJiaW5kIiwid2hpY2giLCIkYXBwbHkiLCIkZXZhbCIsIm5nRW50ZXIiLCJwcmV2ZW50RGVmYXVsdCJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxZQUdBLElBQUFBLEdBQUEsU0FBQUMsRUFBQUMsR0FFQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRSxZQUFBLFNBQUFDLEVBQUFDLEdBRUEsV0FEQSxLQUFBQSxFQUFBRCxFQUFBQyxHQUlBSixFQUFBSyxhQUFBLFNBQUFDLEdBQ0EsR0FBQUMsSUFDQUMsV0FBQSxFQUNBQyxhQUFBLEVBQ0FDLE9BQUEsTUFDQUMsYUFBQSxPQXFCQSxPQWxCQUwsS0FDQUMsRUFBQUMsV0FBQVIsRUFBQUUsWUFBQUssRUFBQUMsV0FBQUYsRUFBQUUsWUFDQUQsRUFBQUUsWUFBQVQsRUFBQUUsWUFBQUssRUFBQUUsWUFBQUgsRUFBQUcsYUFDQUYsRUFBQUcsT0FBQVYsRUFBQUUsWUFBQUssRUFBQUcsT0FBQUosRUFBQUksUUFDQUgsRUFBQUksYUFBQVgsRUFBQUUsWUFBQUssRUFBQUksYUFBQUwsRUFBQUssY0FDQUosRUFBQUssUUFBQVosRUFBQUUsWUFBQUssRUFBQUssUUFBQU4sRUFBQU0sU0FDQUwsRUFBQU0saUJBQUFiLEVBQUFFLFlBQUFLLEVBQUFNLGlCQUFBUCxFQUFBTyxtQkFJQSxRQUFBTixFQUFBRyxPQUNBSCxFQUFBQSxPQUFBRCxFQUFB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QyxNQUFBakcsRUFBQWlHLE1BQ0FsRixRQUFBZixFQUFBZSxRQUdBdUYsR0FBQUUsT0FDQVYsWUFBQUEsS0FJQTlGLEVBQUF5RyxPQUFBLFdBQ0FILEVBQUFJLFFBQUEsWUFLQUMsRUFBQSxTQUFBM0csRUFBQXNHLEVBQUF2RixHQUNBZixFQUFBZSxRQUFBQSxFQUVBZixFQUFBeUcsT0FBQSxXQUNBSCxFQUFBSSxRQUFBLFdBS0E3SCxTQUFBQyxPQUFBLFlBQUEsZ0JBQUEsaUJBQ0E4SCxRQUFBLGdCQUFBLGFBQUEzRyxJQUNBbEIsUUFBQSxrQkFBQSxLQUFBLFFBQUEsY0FBQUMsSUFDQXdHLFdBQUEsZ0JBQUEsU0FBQSxlQUFBLGlCQUFBekYsSUFDQXlGLFdBQUEsa0JBQUEsU0FBQSxlQUFBbEYsSUFDQWtGLFdBQUEsa0JBQUEsU0FBQSxZQUFBLGlCQUFBeEUsSUFDQXdFLFdBQUEscUJBQUEsU0FBQSxvQkFBQSxtQkFBQWEsSUFDQWIsV0FBQSw0QkFBQSxTQUFBLG9CQUFBLFVBQUFtQixJQUNBRSxVQUFBLFVBQUEsV0FDQSxNQUFBLFVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FELEVBQUFFLEtBQUEsbUJBQUEsU0FBQW5HLEdBQ0EsS0FBQUEsRUFBQW9HLFFBQ0FKLEVBQUFLLE9BQUEsV0FDQUwsRUFBQU0sTUFBQUosRUFBQUssU0FBQXZHLE1BQUFBLE1BR0FBLEVBQUF3RyIsImZpbGUiOiJnZXRyZWFsdC1mcm9udGVuZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuXG4gICAgdmFyIHJlc3RTZXJ2aWNlID0gZnVuY3Rpb24gKCRxLCAkaHR0cCkge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmdldE92ZXJyaWRlID0gZnVuY3Rpb24gKGRlZmF1bHRWYWx1ZSwgb3ZlcnJpZGVWYWx1ZSkge1xuICAgICAgICAgICAgdmFyIG5ld1ZhbHVlID0gKCh0eXBlb2Ygb3ZlcnJpZGVWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcpID8gZGVmYXVsdFZhbHVlIDogb3ZlcnJpZGVWYWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3VmFsdWU7IC8vIExlYXZlIHRoZSBtZWFuaW5nbGVzcyBuZXdWYWx1ZSBpbiBoZXJlIGZvciBicmVha3BvaW50IC8gd2F0Y2ggcHVycG9zZXNcbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLmFwcGx5T3B0aW9ucyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIG1heFJldHJpZXM6IDMsXG4gICAgICAgICAgICAgICAgZW5hYmxlQ2FjaGU6IHRydWUsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJ1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgaWYgKG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMubWF4UmV0cmllcyA9IHNlbGYuZ2V0T3ZlcnJpZGUocGFyYW1zLm1heFJldHJpZXMsIG9wdGlvbnMubWF4UmV0cmllcyk7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmVuYWJsZUNhY2hlID0gc2VsZi5nZXRPdmVycmlkZShwYXJhbXMuZW5hYmxlQ2FjaGUsIG9wdGlvbnMuZW5hYmxlQ2FjaGUpO1xuICAgICAgICAgICAgICAgIHBhcmFtcy5tZXRob2QgPSBzZWxmLmdldE92ZXJyaWRlKHBhcmFtcy5tZXRob2QsIG9wdGlvbnMubWV0aG9kKTtcbiAgICAgICAgICAgICAgICBwYXJhbXMucmVzcG9uc2VUeXBlID0gc2VsZi5nZXRPdmVycmlkZShwYXJhbXMucmVzcG9uc2VUeXBlLCBvcHRpb25zLnJlc3BvbnNlVHlwZSk7XG4gICAgICAgICAgICAgICAgcGFyYW1zLmhlYWRlcnMgPSBzZWxmLmdldE92ZXJyaWRlKHBhcmFtcy5oZWFkZXJzLCBvcHRpb25zLmhlYWRlcnMpO1xuICAgICAgICAgICAgICAgIHBhcmFtcy50cmFuc2Zvcm1SZXF1ZXN0ID0gc2VsZi5nZXRPdmVycmlkZShwYXJhbXMudHJhbnNmb3JtUmVxdWVzdCwgb3B0aW9ucy50cmFuc2Zvcm1SZXF1ZXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR0VUIHVzZXMgcGFyYW1zIGFuZCBQT1NUIHVzZXMgZGF0YVxuICAgICAgICAgICAgaWYgKHBhcmFtcy5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1zLnBhcmFtcyA9IG9wdGlvbnMucGFyYW1zO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJhbXMuZGF0YSA9IG9wdGlvbnMucGFyYW1zO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJhbXMudXJsID0gb3B0aW9ucy51cmw7XG5cbiAgICAgICAgICAgIHJldHVybiBwYXJhbXM7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5hbGxvd0NhY2hpbmcgPSBmdW5jdGlvbiAocGFyYW1zKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBXZSBoYXZlbid0IGltcGxlbWVudGVkIHRoaXMgeWV0LCBidXQgd2Ugd2lsbCBkbyBzb21lIGNsaWVudCBzaWRlIGNhY2hpbmdcbiAgICAgICAgICAgIHZhciBhbGxvdyA9IHBhcmFtcy5lbmFibGVDYWNoZTtcblxuICAgICAgICAgICAgaWYgKGFsbG93KSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgaXMgYSBjYWNoZWFibGUgdmVyYiAoR0VUKSB0aGF0IHJldHVybnMgcmVzdWx0cyB0aGF0IGNhbiBiZSBjYWNoZWQgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiBsb2NhbCBzdG9yYWdlIC8gY2FjaGluZyBpcyBhdmFpbGFibGUgb24gdGhpcyBjbGllbnRcblxuICAgICAgICAgICAgICAgIGFsbG93ID0gZmFsc2U7IC8vIFJpZ2h0IG5vdyBkaXNhYmxlIGl0IHVudGlsIHdlIGhhdmUgaW1wbGVtZW50ZWQgY2FjaGluZ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYWxsb3c7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5jYWNoZVJlc3VsdHMgPSBmdW5jdGlvbiAocGFyYW1zLCByZXN1bHRzKSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBXZSBoYXZlbid0IGltcGxlbWVudGVkIHRoaXMgeWV0LCBidXQgd2Ugd2lsbCBkbyBzb21lIGNsaWVudCBzaWRlIGNhY2hpbmdcblxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gJHEuZGVmZXIoKTtcblxuICAgICAgICAgICAgaWYgKHNlbGYuYWxsb3dDYWNoaW5nKHBhcmFtcykpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBGaW5pc2ggdGhpcyAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5mZXRjaEZyb21DYWNoZSA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IFdlIGhhdmVuJ3QgaW1wbGVtZW50ZWQgdGhpcyB5ZXQsIGJ1dCB3ZSB3aWxsIGRvIHNvbWUgY2xpZW50IHNpZGUgY2FjaGluZ1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICBpZiAoc2VsZi5hbGxvd0NhY2hpbmcocGFyYW1zKSkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEZpbmlzaCB0aGlzICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHNlbGYucHJvY2VzcyA9IGZ1bmN0aW9uIChwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHNlbGYuZmV0Y2hGcm9tQ2FjaGUocGFyYW1zKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBnb3QgY2FjaGVkIHJlc3VsdHMsIHdlIGFyZSBkb25lXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGh0dHBPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHBhcmFtcy51cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogcGFyYW1zLm1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiBwYXJhbXMucmVzcG9uc2VUeXBlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBwYXJhbXMuZGF0YSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXMucGFyYW1zXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmhlYWRlcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cE9wdGlvbnMuaGVhZGVycyA9IHBhcmFtcy5oZWFkZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyYW1zLnRyYW5zZm9ybVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHR0cE9wdGlvbnMudHJhbnNmb3JtUmVxdWVzdCA9IHBhcmFtcy50cmFuc2Zvcm1SZXF1ZXN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaHR0cChodHRwT3B0aW9ucylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0cyAmJiBwYXJhbXMuZW5hYmxlQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuY2FjaGVSZXN1bHRzKHBhcmFtcywgcmVzdWx0cy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzdWx0cy5kYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSwgc3RhdHVzLCBoZWFkZXJzLCBjb25maWcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVqZWN0KHtkYXRhOiBkYXRhLCBzdGF0dXM6IHN0YXR1cywgaGVhZGVyczogaGVhZGVycywgY29uZmlnOiBjb25maWd9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIE1haW4gZW50cnkgcG9pbnQgYW5kIHNob3VsZCB0eXBpY2FsbHkgYmUgdGhlIG9ubHkgbWV0aG9kIGNhbGxlZCBleHRlcm5hbGx5XG4gICAgICAgIHNlbGYuZ28gPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gc2VsZi5hcHBseU9wdGlvbnMob3B0aW9ucyk7XG5cbiAgICAgICAgICAgIC8vIFBvbGx5IGlzIHVzZWQgZm9yIHRyYW5zaWVudCBleGNlcHRpb24gaGFuZGxpbmdcbiAgICAgICAgICAgIC8vIFdlIHdpbGwgbWFrZSB0aGlzIG1vcmUgc29waGlzdGljYXRlZFxuICAgICAgICAgICAgcG9sbHkoKVxuICAgICAgICAgICAgICAgIC5yZXRyeShzZWxmLm1heFJldHJpZXMpXG4gICAgICAgICAgICAgICAgLmV4ZWN1dGVGb3JQcm9taXNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucHJvY2VzcyhwYXJhbXMpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChlcnIuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnIuZGF0YSAmJiBlcnIuZGF0YS5zdGF0dXMgPT09IDQwMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBjb25maXJtKFwiWW91IGFyZSBub3QgYXV0aG9yaXplZCB0byBwZXJmb3JtIHRoaXMgYWN0aW9uLiAgSXQncyBwb3NzaWJsZSB5b3VyIHNlc3Npb24gaGFzIHRpbWVkIG91dC4gIFdvdWxkIHlvdSBsaWtlIHRvIHRyeSBsb2dnaW5nIGJhY2sgaW4/XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJUaGVyZSB3YXMgYW4gZXJyb3IhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICAgICAgICB9O1xuXG4gICAgfTtcbiAgICBcbiAgICBhbmd1bGFyLm1vZHVsZSgnZ2V0cmVhbHQucmVzdCcsIFtdKVxuICAgICAgICAgICAgLnNlcnZpY2UoJ3Jlc3RTZXJ2aWNlJywgWyckcScsICckaHR0cCcsIHJlc3RTZXJ2aWNlXSk7XG5cbn0pKCk7IiwiLypcbiBlbGl4aXIoKG1peCkgPT4ge1xuIG1peC53ZWJwYWNrKCcuLi8uLi90aGVtZXMvZ2V0cmVhbHQvYXNzZXRzL2pzL2FwcC5qcycsICcuL3B1YmxpYy90aGVtZXMvZ2V0cmVhbHQvanMnKTtcbiB9KTtcbiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgdmFyIGxpc3RpbmdTZXJ2aWNlID0gZnVuY3Rpb24gKCRxLCAkaHR0cCwgcmVzdFNlcnZpY2UpIHtcblxuICAgICAgICB0aGlzLmluZGV4ID0gZnVuY3Rpb24gKGFkdmFuY2VkU2VhcmNoLCBrZXl3b3JkcywgbWluUHJpY2UsIG1heFByaWNlLCBiZWRzLCBiYXRocywgaW5jbHVkZVJlc2lkZW50aWFsLCBpbmNsdWRlTGFuZCwgaW5jbHVkZUNvbW1lcmNpYWwpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgJ2tleXdvcmRzJzoga2V5d29yZHNcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGlmIChhZHZhbmNlZFNlYXJjaCkge1xuICAgICAgICAgICAgICAgIGlmIChhZHZhbmNlZFNlYXJjaCkge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXMuYWR2YW5jZWRTZWFyY2ggPSBhZHZhbmNlZFNlYXJjaDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1pblByaWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5taW5QcmljZSA9IG1pblByaWNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWF4UHJpY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLm1heFByaWNlID0gbWF4UHJpY2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChpbmNsdWRlUmVzaWRlbnRpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmluY2x1ZGVSZXNpZGVudGlhbCA9IGluY2x1ZGVSZXNpZGVudGlhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVMYW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5pbmNsdWRlTGFuZCA9IGluY2x1ZGVMYW5kO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5jbHVkZUNvbW1lcmNpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zLmluY2x1ZGVDb21tZXJjaWFsID0gaW5jbHVkZUNvbW1lcmNpYWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChiZWRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5iZWRzID0gYmVkcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGJhdGhzKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtcy5iYXRocyA9IGJhdGhzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmVzdFNlcnZpY2UuZ28oe1xuICAgICAgICAgICAgICAgIHVybDogJy9nZXRyZWFsdC9saXN0aW5ncycsXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgcGFyYW1zOiBwYXJhbXNcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIHRocm93IGRhdGE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cblxuICAgICAgICB0aGlzLnNob3cgPSBmdW5jdGlvbiAoaWQpIHtcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9ICRxLmRlZmVyKCk7XG5cbiAgICAgICAgICAgIHJlc3RTZXJ2aWNlLmdvKHtcbiAgICAgICAgICAgICAgICB1cmw6ICcvZ2V0cmVhbHQvbGlzdGluZ3MnICsgaWRcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIHRocm93IGRhdGE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZW5kTGVhZCA9IGZ1bmN0aW9uIChpbmZvKSB7XG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSAkcS5kZWZlcigpO1xuXG4gICAgICAgICAgICByZXN0U2VydmljZS5nbyh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2dldHJlYWx0L2xpc3RpbmdzL3NlbmRMZWFkJyxcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBwYXJhbXM6IGluZm9cbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGRhdGEuZGF0YSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChkYXRhLmRhdGEpO1xuICAgICAgICAgICAgICAgIHRocm93IGRhdGE7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHZhciBzZWFyY2hXaWRnZXQgPSBmdW5jdGlvbiAoJHNjb3BlLCBldmVudEZhY3RvcnksIGxpc3RpbmdTZXJ2aWNlKSB7XG5cbiAgICAgICAgLy8gSW5wdXQgdmFyaWFibGVzXG4gICAgICAgICRzY29wZS5hZHZhbmNlZFNlYXJjaCA9IGZhbHNlO1xuICAgICAgICAkc2NvcGUua2V5d29yZHMgPSBudWxsO1xuICAgICAgICAkc2NvcGUubWluUHJpY2UgPSBudWxsO1xuICAgICAgICAkc2NvcGUubWF4UHJpY2UgPSBudWxsO1xuICAgICAgICAkc2NvcGUuYmVkcyA9IG51bGw7XG4gICAgICAgICRzY29wZS5iYXRocyA9IG51bGw7XG4gICAgICAgICRzY29wZS5pbmNsdWRlUmVzaWRlbnRpYWwgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuaW5jbHVkZUxhbmQgPSB0cnVlO1xuICAgICAgICAkc2NvcGUuaW5jbHVkZUNvbW1lcmNpYWwgPSB0cnVlO1xuXG4gICAgICAgICRzY29wZS5saXN0aW5ncyA9IG51bGw7XG5cbiAgICAgICAgJHNjb3BlLnNlYXJjaCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICgkc2NvcGUuYWR2YW5jZWRTZWFyY2ggfHwgJHNjb3BlLmtleXdvcmRzKSB7XG4gICAgICAgICAgICAgICAgZXZlbnRGYWN0b3J5LnNlYXJjaGluZ0xpc3RpbmdzKHRydWUpO1xuICAgICAgICAgICAgICAgIGxpc3RpbmdTZXJ2aWNlLmluZGV4KFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmFkdmFuY2VkU2VhcmNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmtleXdvcmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1pblByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1heFByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmJlZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuYmF0aHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUuaW5jbHVkZVJlc2lkZW50aWFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluY2x1ZGVMYW5kLFxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmluY2x1ZGVDb21tZXJjaWFsXG4gICAgICAgICAgICAgICAgICAgICAgICApLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RpbmdzID0gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRGYWN0b3J5LnNlYXJjaGluZ0xpc3RpbmdzKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRGYWN0b3J5LnJlZnJlc2hMaXN0aW5ncygkc2NvcGUubGlzdGluZ3MpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB2YXIgbGlzdGluZ3NXaWRnZXQgPSBmdW5jdGlvbiAoJHNjb3BlLCBldmVudEZhY3RvcnkpIHtcbiAgICAgICAgJHNjb3BlLmxpc3RpbmdzID0gbnVsbDtcblxuICAgICAgICBldmVudEZhY3Rvcnkub25TZWFyY2hpbmdMaXN0aW5ncygkc2NvcGUsIGZ1bmN0aW9uIChzZWFyY2hpbmcpIHtcbiAgICAgICAgICAgICRzY29wZS5zZWFyY2hpbmcgPSBzZWFyY2hpbmc7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV2ZW50RmFjdG9yeS5vblJlZnJlc2hMaXN0aW5ncygkc2NvcGUsIGZ1bmN0aW9uIChsaXN0aW5ncykge1xuICAgICAgICAgICAgJHNjb3BlLmxpc3RpbmdzID0gbGlzdGluZ3M7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgZXZlbnRGYWN0b3J5ID0gZnVuY3Rpb24gKCRyb290U2NvcGUpIHtcbiAgICAgICAgdmFyIFJFRlJFU0hfTElTVElOR1MgPSAncmVmcmVzaExpc3RpbmdzJztcbiAgICAgICAgdmFyIHJlZnJlc2hMaXN0aW5ncyA9IGZ1bmN0aW9uIChsaXN0aW5ncykge1xuICAgICAgICAgICAgJHJvb3RTY29wZS4kYnJvYWRjYXN0KFJFRlJFU0hfTElTVElOR1MsIGxpc3RpbmdzKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uUmVmcmVzaExpc3RpbmdzID0gZnVuY3Rpb24gKCRzY29wZSwgaGFuZGxlcikge1xuICAgICAgICAgICAgJHNjb3BlLiRvbihSRUZSRVNIX0xJU1RJTkdTLCBmdW5jdGlvbiAoZXZlbnQsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIFNFQVJDSElOR19MSVNUSU5HUyA9ICdzZWFyY2hpbmdMaXN0aW5ncyc7XG4gICAgICAgIHZhciBzZWFyY2hpbmdMaXN0aW5ncyA9IGZ1bmN0aW9uIChzZWFyY2hpbmcpIHtcbiAgICAgICAgICAgICRyb290U2NvcGUuJGJyb2FkY2FzdChTRUFSQ0hJTkdfTElTVElOR1MsIHNlYXJjaGluZyk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvblNlYXJjaGluZ0xpc3RpbmdzID0gZnVuY3Rpb24gKCRzY29wZSwgaGFuZGxlcikge1xuICAgICAgICAgICAgJHNjb3BlLiRvbihTRUFSQ0hJTkdfTElTVElOR1MsIGZ1bmN0aW9uIChldmVudCwgbWVzc2FnZSkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIobWVzc2FnZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByZWZyZXNoTGlzdGluZ3M6IHJlZnJlc2hMaXN0aW5ncyxcbiAgICAgICAgICAgIG9uUmVmcmVzaExpc3RpbmdzOiBvblJlZnJlc2hMaXN0aW5ncyxcbiAgICAgICAgICAgIHNlYXJjaGluZ0xpc3RpbmdzOiBzZWFyY2hpbmdMaXN0aW5ncyxcbiAgICAgICAgICAgIG9uU2VhcmNoaW5nTGlzdGluZ3M6IG9uU2VhcmNoaW5nTGlzdGluZ3NcbiAgICAgICAgfTtcblxuICAgIH07XG5cbiAgICB2YXIgbGlzdGluZ0RldGFpbHMgPSBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWwsIGxpc3RpbmdTZXJ2aWNlKSB7XG5cbiAgICAgICAgJHNjb3BlLmxpc3RpbmdTb3VyY2UgPSBudWxsO1xuICAgICAgICAkc2NvcGUubGlzdGluZ1R5cGUgPSBudWxsO1xuICAgICAgICAkc2NvcGUubGlzdGluZ0lEID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmFkZHJlc3MgPSBudWxsO1xuXG4gICAgICAgICRzY29wZS5pbml0TWFwID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuICAgICAgICAgICAgaWYgKGdlb2NvZGVyKSB7XG4gICAgICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7J2FkZHJlc3MnOiAkc2NvcGUuYWRkcmVzc30sIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgIT09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLlpFUk9fUkVTVUxUUykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXBDYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwQ2FudmFzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1hcE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjogbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHpvb206IDE2LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKG1hcENhbnZhcywgbWFwT3B0aW9ucyk7XG5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG1hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJy9hc3NldHMvdGhlbWVzL2dldHJlYWx0L2ltYWdlcy9tYXJrZXIucG5nJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbnNMaW5rID0gJ2h0dHA6Ly93d3cuZ29vZ2xlLmNvbS9tYXBzL2Rpci9jdXJyZW50K3Bvc2l0aW9uLycgKyBlbmNvZGVVUkkoJHNjb3BlLmFkZHJlc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzdHJlZXRWaWV3TGluayA9ICdodHRwOi8vbWFwcy5nb29nbGUuY29tL21hcHM/cT0mbGF5ZXI9YyZjYmxsPScgKyByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uLmxhdCgpICsgJywnICsgcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbi5sbmcoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50U3RyaW5nID0gJzxkaXYgY2xhc3M9XCJpbmZvLXdpbmRvd1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxoNT48aSBjbGFzcz1cImZhIGZhLW1hcC1tYXJrZXJcIj48L2k+ICcgKyByZXN1bHRzWzBdLmZvcm1hdHRlZF9hZGRyZXNzICsgJzwvaDU+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImluZm8tY29udGVudFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxwPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpIGNsYXNzPVwiZmEgZmEtY2FyXCI+PC9pPjogPGEgaHJlZj1cIicgKyBkaXJlY3Rpb25zTGluayArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj5HZXQgRGlyZWN0aW9uczwvYT48YnIgLz4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aSBjbGFzcz1cImZhIGZhLXN0cmVldC12aWV3XCI+PC9pPjogPGEgaHJlZj1cIicgKyBzdHJlZXRWaWV3TGluayArICdcIiB0YXJnZXQ9XCJfYmxhbmtcIj5TdHJlZXQgVmlldzwvYT48YnIgLz4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbmZvd2luZG93ID0gbmV3IGdvb2dsZS5tYXBzLkluZm9XaW5kb3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBjb250ZW50U3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogNDAwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvd2luZG93Lm9wZW4obWFwLCBtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN0eWxlcyA9IFt7XCJmZWF0dXJlVHlwZVwiOiBcImFkbWluaXN0cmF0aXZlXCIsIFwic3R5bGVyc1wiOiBbe1widmlzaWJpbGl0eVwiOiBcIm9mZlwifV19LCB7XCJmZWF0dXJlVHlwZVwiOiBcInBvaVwiLCBcInN0eWxlcnNcIjogW3tcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCJ9XX0sIHtcImZlYXR1cmVUeXBlXCI6IFwicm9hZFwiLCBcImVsZW1lbnRUeXBlXCI6IFwibGFiZWxzXCIsIFwic3R5bGVyc1wiOiBbe1widmlzaWJpbGl0eVwiOiBcInNpbXBsaWZpZWRcIn1dfSwge1wiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLCBcInN0eWxlcnNcIjogW3tcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCJ9XX0sIHtcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdFwiLCBcInN0eWxlcnNcIjogW3tcInZpc2liaWxpdHlcIjogXCJzaW1wbGlmaWVkXCJ9XX0sIHtcImZlYXR1cmVUeXBlXCI6IFwibGFuZHNjYXBlXCIsIFwic3R5bGVyc1wiOiBbe1widmlzaWJpbGl0eVwiOiBcInNpbXBsaWZpZWRcIn1dfSwge1wiZmVhdHVyZVR5cGVcIjogXCJyb2FkLmhpZ2h3YXlcIiwgXCJzdHlsZXJzXCI6IFt7XCJ2aXNpYmlsaXR5XCI6IFwib2ZmXCJ9XX0sIHtcImZlYXR1cmVUeXBlXCI6IFwicm9hZC5sb2NhbFwiLCBcInN0eWxlcnNcIjogW3tcInZpc2liaWxpdHlcIjogXCJvblwifV19LCB7XCJmZWF0dXJlVHlwZVwiOiBcInJvYWQuaGlnaHdheVwiLCBcImVsZW1lbnRUeXBlXCI6IFwiZ2VvbWV0cnlcIiwgXCJzdHlsZXJzXCI6IFt7XCJ2aXNpYmlsaXR5XCI6IFwib25cIn1dfSwge1wiZmVhdHVyZVR5cGVcIjogXCJ3YXRlclwiLCBcInN0eWxlcnNcIjogW3tcImNvbG9yXCI6IFwiIzg0YWZhM1wifSwge1wibGlnaHRuZXNzXCI6IDUyfV19LCB7XCJzdHlsZXJzXCI6IFt7XCJzYXR1cmF0aW9uXCI6IC0xN30sIHtcImdhbW1hXCI6IDAuMzZ9XX0sIHtcImZlYXR1cmVUeXBlXCI6IFwidHJhbnNpdC5saW5lXCIsIFwiZWxlbWVudFR5cGVcIjogXCJnZW9tZXRyeVwiLCBcInN0eWxlcnNcIjogW3tcImNvbG9yXCI6IFwiIzNmNTE4Y1wifV19XTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5zZXQoJ3N0eWxlcycsIHN0eWxlcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIk5vIHJlc3VsdHMgZm91bmRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KFwiR2VvY29kZSB3YXMgbm90IHN1Y2Nlc3NmdWwgZm9yIHRoZSBmb2xsb3dpbmcgcmVhc29uOiBcIiArIHN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pbml0U2xpZGVycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFRoZSBzbGlkZXIgYmVpbmcgc3luY2VkIG11c3QgYmUgaW5pdGlhbGl6ZWQgZmlyc3RcbiAgICAgICAgICAgICQoJyNjYXJvdXNlbCcpLmZsZXhzbGlkZXIoe1xuICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogXCJzbGlkZVwiLFxuICAgICAgICAgICAgICAgIGNvbnRyb2xOYXY6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbkxvb3A6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNsaWRlc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXRlbVdpZHRoOiAyMTAsXG4gICAgICAgICAgICAgICAgaXRlbU1hcmdpbjogNSxcbiAgICAgICAgICAgICAgICBzbW9vdGhIZWlnaHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgYXNOYXZGb3I6ICcjc2xpZGVyJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICQoJyNzbGlkZXInKS5mbGV4c2xpZGVyKHtcbiAgICAgICAgICAgICAgICBhbmltYXRpb246IFwic2xpZGVcIixcbiAgICAgICAgICAgICAgICBjb250cm9sTmF2OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25Mb29wOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzbGlkZXNob3c6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNtb290aEhlaWdodDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzeW5jOiBcIiNjYXJvdXNlbFwiXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuXG4gICAgICAgICRzY29wZS5jb250YWN0QWdlbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9ICR1aWJNb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbnRhY3RBZ2VudC5odG1sJyxcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAnY29udGFjdEFnZW50TW9kYWwnLFxuICAgICAgICAgICAgICAgIGFyaWFMYWJlbGxlZEJ5OiAnbW9kYWwtdGl0bGUnLFxuICAgICAgICAgICAgICAgIGFyaWFEZXNjcmliZWRCeTogJ21vZGFsLWJvZHknLFxuICAgICAgICAgICAgICAgIHNpemU6ICdsZycsXG4gICAgICAgICAgICAgICAgcmVzb2x2ZToge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnRDb250cm9sbGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1vZGFsSW5zdGFuY2UucmVzdWx0LnRoZW4oXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5mbyA9IHJlc3VsdHMuY29udGFjdEluZm87XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjbG9zZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvICYmIChpbmZvLm5hbWUgfHwgaW5mby5waG9uZSB8fCBpbmZvLmVtYWlsIHx8IGluZm8ubWVzc2FnZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmxpc3RpbmdTb3VyY2UgPSAkc2NvcGUubGlzdGluZ1NvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmxpc3RpbmdUeXBlID0gJHNjb3BlLmxpc3RpbmdUeXBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8ubGlzdGluZ0lEID0gJHNjb3BlLmxpc3RpbmdJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0aW5nU2VydmljZS5zZW5kTGVhZChpbmZvKS50aGVuKGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR1aWJNb2RhbC5vcGVuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnbWVzc2FnZUNvbmZpcm1hdGlvbi5odG1sJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdtZXNzYWdlQ29uZmlybWF0aW9uTW9kYWwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYUxhYmVsbGVkQnk6ICdtb2RhbC10aXRsZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhRGVzY3JpYmVkQnk6ICdtb2RhbC1ib2R5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6ICdzbScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGRhdGEuc3VjY2VzcyA/IFwiTWVzc2FnZSBTZW50IVwiIDogXCJPb3BzISBPdXIgbWVzc2FnaW5nIGlzIGRvd24gcmlnaHQgbm93LiAgVHJ5IGNvbnRhY3RpbmcgdXMgZGlyZWN0bHkgcGxlYXNlIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzbWlzc2VkXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnN0YXJ0ID0gZnVuY3Rpb24gKGxpc3RpbmdTb3VyY2UsIGxpc3RpbmdUeXBlLCBsaXN0aW5nSUQsIGFkZHJlc3MpIHtcbiAgICAgICAgICAgICRzY29wZS5saXN0aW5nU291cmNlID0gbGlzdGluZ1NvdXJjZTtcbiAgICAgICAgICAgICRzY29wZS5saXN0aW5nVHlwZSA9IGxpc3RpbmdUeXBlO1xuICAgICAgICAgICAgJHNjb3BlLmxpc3RpbmdJRCA9IGxpc3RpbmdJRDtcbiAgICAgICAgICAgICRzY29wZS5hZGRyZXNzID0gYWRkcmVzcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkRG9tTGlzdGVuZXIod2luZG93LCAnbG9hZCcsICRzY29wZS5pbml0TWFwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgJHNjb3BlLmluaXRTbGlkZXJzKCk7XG4gICAgICAgIH07XG5cbiAgICB9O1xuICAgIFxuICAgIHZhciBjb250YWN0QWdlbnRNb2RhbCA9IGZ1bmN0aW9uICgkc2NvcGUsICR1aWJNb2RhbEluc3RhbmNlLCBwYXJlbnRDb250cm9sbGVyKSB7XG4gICAgICAgICRzY29wZS5uYW1lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLnBob25lID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLmVtYWlsID0gbnVsbDtcbiAgICAgICAgJHNjb3BlLm1lc3NhZ2UgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLnNlbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHZhciBjb250YWN0SW5mbyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiAkc2NvcGUubmFtZSxcbiAgICAgICAgICAgICAgICBwaG9uZTogJHNjb3BlLnBob25lLFxuICAgICAgICAgICAgICAgIGVtYWlsOiAkc2NvcGUuZW1haWwsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJHNjb3BlLm1lc3NhZ2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmNsb3NlKHtcbiAgICAgICAgICAgICAgICBjb250YWN0SW5mbzogY29udGFjdEluZm9cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICB9O1xuICAgIFxuICAgIHZhciBtZXNzYWdlQ29uZmlybWF0aW9uTW9kYWwgPSBmdW5jdGlvbiAoJHNjb3BlLCAkdWliTW9kYWxJbnN0YW5jZSwgbWVzc2FnZSkge1xuICAgICAgICAkc2NvcGUubWVzc2FnZSA9IG1lc3NhZ2U7XG5cbiAgICAgICAgJHNjb3BlLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICR1aWJNb2RhbEluc3RhbmNlLmRpc21pc3MoJ2NhbmNlbCcpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2dldHJlYWx0JywgWydnZXRyZWFsdC5yZXN0JywgJ3VpLmJvb3RzdHJhcCddKVxuICAgICAgICAuZmFjdG9yeSgnZXZlbnRGYWN0b3J5JywgWyckcm9vdFNjb3BlJywgZXZlbnRGYWN0b3J5XSlcbiAgICAgICAgLnNlcnZpY2UoJ2xpc3RpbmdTZXJ2aWNlJywgWyckcScsICckaHR0cCcsICdyZXN0U2VydmljZScsIGxpc3RpbmdTZXJ2aWNlXSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ3NlYXJjaFdpZGdldCcsIFsnJHNjb3BlJywgJ2V2ZW50RmFjdG9yeScsICdsaXN0aW5nU2VydmljZScsIHNlYXJjaFdpZGdldF0pXG4gICAgICAgIC5jb250cm9sbGVyKCdsaXN0aW5nc1dpZGdldCcsIFsnJHNjb3BlJywgJ2V2ZW50RmFjdG9yeScsIGxpc3RpbmdzV2lkZ2V0XSlcbiAgICAgICAgLmNvbnRyb2xsZXIoJ2xpc3RpbmdEZXRhaWxzJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsJywgJ2xpc3RpbmdTZXJ2aWNlJywgbGlzdGluZ0RldGFpbHNdKVxuICAgICAgICAuY29udHJvbGxlcignY29udGFjdEFnZW50TW9kYWwnLCBbJyRzY29wZScsICckdWliTW9kYWxJbnN0YW5jZScsICdwYXJlbnRDb250cm9sbGVyJywgY29udGFjdEFnZW50TW9kYWxdKVxuICAgICAgICAuY29udHJvbGxlcignbWVzc2FnZUNvbmZpcm1hdGlvbk1vZGFsJywgWyckc2NvcGUnLCAnJHVpYk1vZGFsSW5zdGFuY2UnLCAnbWVzc2FnZScsIG1lc3NhZ2VDb25maXJtYXRpb25Nb2RhbF0pXG4gICAgICAgIC5kaXJlY3RpdmUoJ25nRW50ZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRycykge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuYmluZChcImtleWRvd24ga2V5cHJlc3NcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlLiRhcHBseShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGUuJGV2YWwoYXR0cnMubmdFbnRlciwgeyAnZXZlbnQnOiBldmVudCB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxufSkoKTtcblxuXG4iXX0=
